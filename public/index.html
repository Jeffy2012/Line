<!doctype html>
<html lang="zh_CN" data-ng-app="line">
<head>
    <meta charset="UTF-8">
    <title>Line</title>
    <link rel="stylesheet" href="/stylesheets/styles.css"/>
</head>
<body>
<div id="search" data-ng-controller='explorerCtrl'>
    <div class="input-group">
        <span class="input-group-btn" data-ng-click="search($event)">
            <button class="btn btn-default" type="button">Search</button>
        </span>
        <input type="text" class="form-control" placeholder="歌词/歌手/拼音"
               data-ng-model="query.keyword"
               data-ng-keydown="search($event)"
               data-typeahead-template-url="/views/autoComplete.html"
               data-typeahead="item as item.keyword for item in ac($viewValue)"/>
    </div>
</div>
<div data-ng-controller="radioCtrl">
    <button class="btn btn-default"
            data-ng-click="list()">电台
    </button>
    <div class="bg-info clearfix track"
         data-ng-repeat="fm in radio.fms">
        <span class="result-name">{{fm.fmname}}</span>

        <div class="btn btn-success btn-xs pull-right"
             data-ng-click="tuneTo(fm)">
            <span class="glyphicon glyphicon-plus"></span>
        </div>
    </div>
</div>
<div data-ng-controller="playlistCtrl">
    <div class="bg-info clearfix track"
         data-ng-class="{'bg-info': !isPlaying(track),'btn-primary': isPlaying(track)}"
         data-ng-repeat="track in playlist.tracks | orderObjectBy:'timestamp'">
        <div class="btn btn-default btn-xs btn-success play"
             data-ng-click="play(track)">
            <span class="glyphicon glyphicon-play"></span>
        </div>
        <span class="song-name">{{track.filename}}</span>

        <div class="btn btn-default btn-danger btn-xs pull-right remove"
             data-ng-click="remove(track)">
            <span class="glyphicon glyphicon-trash"></span>
        </div>
    </div>
</div>
<div data-ng-controller="tracksCtrl">
    <pagination class="pagination-sm"
                data-total-items="tracks.info.total"
                data-ng-model="tracks.info.page"
                data-max-size="tracks.info.maxSize"
                data-items-per-page="tracks.info.pagesize"
                data-boundary-links="true"
                data-rotate="false"
                data-num-pages="totalPage"
                data-ng-show="totalPage > 1"
                data-ng-if="tracks.data.length > 0"></pagination>
    <div class="bg-info clearfix track"
         data-ng-repeat="track in tracks.data">
        <span class="result-name">{{track.filename}}</span>

        <div class="btn btn-success btn-xs pull-right"
             data-ng-click="add(track)">
            <span class="glyphicon glyphicon-plus"></span>
        </div>
    </div>
</div>
<div data-ng-controller="krcCtrl" class="krc">
    <p data-ng-repeat="point in player.krc.points"
       data-ng-class="{active : $index == player.krc.active}">{{player.krc[point]}}</p>
</div>
<div id="player"
     class="navbar-fixed-bottom"
     data-ng-controller="playerCtrl">
    <div class="player-right">
        <div class="player-control mr-10 mt-25"
             data-ng-if="player.prev !== 'disabled' "
             data-ng-click="player.prev()">
            <span class="glyphicon glyphicon-backward"></span>
        </div>
        <div class="player-control mr-10 mt-25"
             data-ng-if="!player.playing()"
             data-ng-click="player.play()">
            <span class="glyphicon glyphicon-play"></span>
        </div>
        <div class="player-control mr-10 mt-25"
             data-ng-if="player.playing()"
             data-ng-click="player.pause()">
            <span class="glyphicon glyphicon-pause"></span>
        </div>
        <div class="player-control mr-10 mt-25"
             data-ng-click="player.next()">
            <span class="glyphicon glyphicon-forward"></span>
        </div>
    </div>
    <div class="player-left">
        <div class="track-info">
            <img data-ng-src="{{player.current.imgurl | size:80}}" alt="" width="48"/>
            <span>{{player.current.filename}}</span>
        </div>
        <span class="current">{{player.currentTime | time}}</span>
        <span class="duration">{{player.current.duration | time}}</span>

        <div class="progress" data-ng-click="seek($event)">
            <div class="progress-bar"
                 role="progressbar"
                 aria-valuemin="0"
                 aria-valuemax="100"
                 data-ng-style="{width: player.progress + '%'}">
            </div>
        </div>
    </div>
</div>
<script src="javascripts/vendor/jquery/jquery-2.1.1.js"></script>
<script src="javascripts/vendor/underscore.js"></script>
<script src="javascripts/vendor/howler/howler.core.js"></script>
<script src="javascripts/vendor/howler/plugins/howler.effects.js"></script>
<script src="javascripts/vendor/store/store.js"></script>
<script src="javascripts/vendor/angular/angular.js"></script>
<script src="javascripts/vendor/angular/angular-route.js"></script>
<script src="javascripts/vendor/angular/bootstrap/ui-bootstrap-tpls-0.11.0.js"></script>
<script src="javascripts/line.js"></script>
<script src="javascripts/filters/filters.js"></script>
<script src="javascripts/service/server.js"></script>
<script src="javascripts/service/explorer.js"></script>
<script src="javascripts/service/player.js"></script>
<script src="javascripts/service/tracks.js"></script>
<script src="javascripts/service/radio.js"></script>
<script src="javascripts/service/playlist.js"></script>
<script src="javascripts/controls/playerCtrl.js"></script>
<script src="javascripts/controls/playlistCtrl.js"></script>
<script src="javascripts/controls/explorerCtrl.js"></script>
<script src="javascripts/controls/tracksCtrl.js"></script>
<script src="javascripts/controls/krcCtrl.js"></script>
<script src="javascripts/controls/radioCtrl.js"></script>
</body>
</html>